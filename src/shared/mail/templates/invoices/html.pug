doctype html
html(lang="ar" dir="rtl")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title ÙØ§ØªÙˆØ±ØªÙƒ Ø±Ù‚Ù… #{invoiceId}
    style.
      /* ğŸ¨ ØªÙ†Ø³ÙŠÙ‚ Ø§Ø­ØªØ±Ø§ÙÙŠ Ø¨Ø³ÙŠØ· ÙˆÙ…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ø¨Ø±ÙŠØ¯ */
      body {
        font-family: "Segoe UI", Tahoma, Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 20px;
        direction: rtl;
        text-align: right;
      }
      .container {
        background-color: #ffffff;
        max-width: 750px;
        margin: 0 auto;
        padding: 25px;
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      }
      .header {
        border-bottom: 2px solid #16a34a;
        padding-bottom: 10px;
        margin-bottom: 20px;
      }
      .header h1 {
        color: #16a34a;
        margin: 0;
        font-size: 22px;
      }
      .content p {
        color: #374151;
        font-size: 15px;
        line-height: 1.7;
        margin: 8px 0;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
      }
      th, td {
        border: 1px solid #e5e7eb;
        padding: 8px 10px;
        font-size: 14px;
      }
      th {
        background-color: #f3f4f6;
        color: #111827;
        text-align: center;
        font-weight: 600;
      }
      td {
        text-align: center;
        color: #374151;
      }
      .product-cell {
        text-align: right !important;
      }
      .product-name {
        font-weight: 600;
        color: #111827;
        margin-bottom: 4px;
      }
      .product-attributes {
        font-size: 12px;
        color: #6b7280;
      }
      .discount-amount {
        color: #16a34a;
        font-weight: 600;
      }
      .price {
        font-weight: 600;
        color: #111827;
      }
      .total {
        margin-top: 20px;
        text-align: left;
        font-weight: bold;
        color: #111827;
      }
      .total-section {
        background-color: #f9fafb;
        padding: 15px;
        border-radius: 6px;
        margin-top: 20px;
      }
      .total-row {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        font-size: 16px;
        color: #374151;
      }
      .total-row.discount-row {
        color: #16a34a;
      }
      .total-row.final {
        border-top: 2px solid #16a34a;
        margin-top: 10px;
        padding-top: 15px;
        font-size: 20px;
        font-weight: 700;
        color: #16a34a;
      }
      .footer {
        margin-top: 30px;
        font-size: 13px;
        color: #6b7280;
        text-align: center;
      }
      .highlight {
        color: #16a34a;
        font-weight: bold;
      }

  body
    .container
      .header
        h1 ğŸ§¾ ÙØ§ØªÙˆØ±ØªÙƒ Ø±Ù‚Ù… #{invoiceId}
      .content
        p Ù…Ø±Ø­Ø¨Ù‹Ø§ #{customer.name},
        p Ø´ÙƒØ±Ù‹Ø§ Ù„Ø´Ø±Ø§Ø¦Ùƒ Ù…Ù† ÙØ±Ø¹ <span class="highlight">#{branchName}</span>.
        p Ø¥Ù„ÙŠÙƒ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ:
        if items && items.length
          table
            thead
              tr
                th Ø§Ù„Ù…Ù†ØªØ¬
                th Ø§Ù„ÙƒÙ…ÙŠØ©
                th Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©
                th Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹
                th Ø§Ù„Ø®ØµÙ…
                th Ø§Ù„ØµØ§ÙÙŠ
            tbody
              each item in items
                - var itemSubtotal = (item.quantity * item.unitPrice)
                - var itemDiscount = item.discount || 0
                - var itemNetPrice = itemSubtotal - itemDiscount
                tr
                  td.product-cell
                    .product-name
                      if item.brand
                        | #{item.brand} 
                      | #{item.productName}
                    if item.attributes
                      .product-attributes #{item.attributes}
                  td #{item.quantity}
                  td.price #{item.unitPrice.toFixed(2)} Ø¬.Ù…
                  td.price #{itemSubtotal.toFixed(2)} Ø¬.Ù…
                  td.discount-amount
                    if itemDiscount > 0
                      | -#{itemDiscount.toFixed(2)} Ø¬.Ù…
                    else
                      | -
                  td.price #{itemNetPrice.toFixed(2)} Ø¬.Ù…
        
        .total-section
          .total-row
            span Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ:
            span.price #{subtotal.toFixed(2)} Ø¬.Ù…
          if invoiceDiscount && invoiceDiscount > 0
            .total-row.discount-row
              span Ø§Ù„Ø®ØµÙ…:
              span.discount-amount -#{invoiceDiscount.toFixed(2)} Ø¬.Ù…
          if tax && tax > 0
            .total-row
              span Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:
              span.price +#{tax.toFixed(2)} Ø¬.Ù…
          .total-row.final
            span Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ:
            span.price #{totalAmount.toFixed(2)} Ø¬.Ù…
        
        p ÙŠÙ…ÙƒÙ†Ùƒ Ø¹Ø±Ø¶ ÙˆØªØ­Ù…ÙŠÙ„ ÙØ§ØªÙˆØ±ØªÙƒ Ù…Ù† Ø­Ø³Ø§Ø¨Ùƒ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª.
      
      .footer
        p ğŸ’š Ø´ÙƒØ±Ù‹Ø§ Ù„Ø§Ø®ØªÙŠØ§Ø±Ùƒ ØªØ·Ø¨ÙŠÙ‚Ù†Ø§  
        p &copy; #{new Date().getFullYear()} My App. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.